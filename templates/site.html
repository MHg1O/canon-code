{% extends "base.html" %}

{% block title %}{{ name }}{% endblock %}

{% block body %}
Generated at {{ generated.strftime("%Y-%m-%d %H:%M:%S") }}

{% if notes %}
<ul>
    {% for note in notes %}
    <li>{{ note }}</li>
    {% endfor %}
</ul>
{% endif %}

<table>
{% for item_id, item in items %}
    <tr id="{{ item_id }}">
        <td width=25%>
			<h3>{{ item_id }}{% if "name" in item %} {{ item["name"] }}{% endif %}</h3>
            {% if "description" in item %}{{ item["description"] | safe }}<br>{% endif %}
            {% if "date" in item %}Date: {{ item["date"] }}<br>{% endif %}
			{% for size_key, size_value in item.get("size", {}).items() %}
			{{ size_key.title() }}: {{ size_value }}<br>
			{% endfor %}
            {% if "price" in item %}Price: ${{ item["price"] }}<br>{% endif %}
            {% if item.get("model") %}
			Model: {% for model in item["model"] %}<a href="{{ url_for('model_page', model_id=model.model_id) }}">{{ model.name }}</a>{% if not loop.last %}, {% endif %}{% endfor %}<br>
            {% endif %}
            {% if item.get("related") %}
            Related:
                {% for family, site, item_id in item["related"] %}
                <a href="{{ url_for('preview', family=family, site=site, _anchor=item_id) }}">{{ get_item_name(family, site, item_id) }}</a>{% if not loop.last %}, {% endif %}
                {% endfor %}
			<br>{% endif %}
            {% if "url" in item %}<a href="{{ item['url'] }}">Web link</a><br>{% endif %}
            {% if "archive_url" in item %}<a href="{{ item['archive_url'] }}">Archive link</a><br>{% endif %}
        </td>
        <td>
            {% for preview in item.get("previews", []) + item.get("previews_local", []) %}
            {% if is_image(preview) %}
            <img src="{{ preview }}" height=240 loading=lazy>
            {% else %}
            <video height=240 preload="metadata" controls><source src="{{ preview }}" type="video/mp4"></video>
            {% endif %}
            {% endfor %}
        </td>
    </tr>
{% endfor %}
</table>
{% endblock %}
